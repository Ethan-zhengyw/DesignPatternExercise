# 20 迭代器模式

## 定义

### 提供一种方法顺序访问一个聚合对象中各个元素，而又不暴漏该对象的内部表示

## 类型

### 对象行为型

## 动机

### 迭代器模式分离了集合对象的遍历行为，抽象出一个迭代器来负责，这样既可以做到不暴露集合的内部结构，又可以让外部代码透明地访问集合内部的数据

## 适用性

### 当你需要访问一个聚集对象，而不管这些对象是什么都需要遍历的时候，你就应该考虑用迭代器模式。

### 你需要对聚集的对象有多种方式遍历时，可以考虑使用迭代器模式

### 为遍历不同的聚集结构提供如开始、下一个、是否结束、当前哪一项等统一的接口

## 参与者

### 抽象聚集类

#### 定义创建迭代器的接口

### 具体聚集类

#### 实现创建具体迭代器的接口

### 抽象迭代器类

#### 定义获取抽象聚集集合对象的第一个、下一个、是否结束、当前遍历到哪一项的接口

### 具体迭代器类

#### 实现抽象迭代器类，实现获取具体聚集类集合对象的第一个、下一个、是否结束、当前遍历到哪一项的接口

## 实现

### next方法调用成功返回具体对象，否则返回假/空

## 已知应用

### Java/.Net语言foreach语句

#### 通过IEnumerable（枚举接口）和IEnumerator（枚举类型迭代器）使得Java中各数据类型支持枚举遍历

#### foreach语句其实先通过GetEnumerator获取迭代器，然后使用while循环调用MoveNext方法和Current方法遍历集合
