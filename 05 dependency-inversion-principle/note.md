# 05 依赖倒转原则与里氏代换原则

## 依赖倒转原则

### 定义

#### 高层模块不应该依赖低层模块。两个都应该依赖抽象

#### 抽象不应该依赖细节。细节应该依赖抽象

### 案例

#### 电脑主板 vs 收音机

##### 电脑主板易插拔

###### 强内聚

###### 松耦合

#### 复用业务逻辑层但数据访问层实现要求不同

##### 如果业务逻辑层依赖于具体的数据访问方式，则无法复用

##### 如果业务逻辑层访问数据层时，是针对接口编程的，只要修改“存储驱动”配置即可对接新的数据存储，不需要修改业务逻辑层调用低层的实现

###### 即针对接口编程

###### 类似web服务器

####### python的wsgi

## 里氏代换原则

### 定义

#### 子类型必须能够替换掉它们的父类型

### 目的

#### 只有当子类可以替换掉父类，软件单位的功能不受到影响时，父类才能真正被复用，而子类也能够在父类的基础上增加新的行为

### 误区与反模式

#### 企鹅继承鸟

##### 如果鸟这个父类会飞，那么其子类也应该要会飞，在OOP世界里，企鹅不应该继承鸟

### 与依赖倒转原则如何联系起来？

#### 使用父类型的模块在无需修改的情况下可以扩展

##### 使用父类型的模块
animal = new cat();
animal.eat();
animal.run();

##### 需求来了，需要把猫换成狗，只需要替换一个地方即可
animal = new dog();
animal.eat();
animal.run();

#### 类比到依赖倒转的场景

##### 业务逻辑层与数据访问层

###### 因为大家都是针对接口编程的，所以低层的模块可以很方便地进行替换，而不涉及上层的大量修改
