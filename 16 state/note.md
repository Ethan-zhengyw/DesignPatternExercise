# DP之状态模式

## 定义

### 当一个对象的内在状态改变时，允许改变其行为，看起来就像对象的类发生了改变

## 分类

### 行为型设计模式

## 好处与应用场景

### 状态模式主要解决的是决定一个对象行为的条件表达式过于复杂的问题

### 将特定状态相关的行为局部化，并且将不同状态的行为分割开来

### 把判断逻辑转移到表示不同状态的一系列类当中，可以把复杂的判断逻辑简化。

### 状态个数过多时不宜使用

#### why？

##### 状态的转换逻辑复杂，可维护性降低

## 如何用好状态模式？

### 应用状态模式时可能遇到的问题以及如何避免它们？

### 读读开源项目里经典的应用状态模式的例子

## 练习

### 题目（自动门控制系统）
https://web.ti.bfh.ch/~due1/courses/c355/exercises/state/

#### 状态机定义

##### 定义状态

###### opening

###### open

###### closing

###### closed

##### 定义事件（可选，触发操作）

###### 事件b：开门控制按钮🔘被按下，产生事件b

###### 事件s1：传感器S1在门达到完全打开的状态时被激活，产生事件s1

###### 事件s2：传感器S2在门达到完全关闭的状态时被激活，产生事件s2

###### 事件ls：门之间的光屏障被阻断，产生事件ls

###### 事件time-out：计时器超时后，产生事件time-out

##### 定义操作/行为

###### open

####### 启动引擎开门

###### stop

####### 停止引擎

###### start

####### 启动计时器

###### close

####### 启动引擎关门

##### 绘制状态转化图

#### 定义控制逻辑

## 参考资料

### 《大话设计模式》，程杰著

### https://stackoverflow.com/questions/4935806/how-to-use-state-pattern-correctly
