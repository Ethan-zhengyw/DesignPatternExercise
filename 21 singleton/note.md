# 21 单例模式

## 定义

### 保证一个类仅有一个实例，并提供一个访问它的全局访问点

## 如何禁止类从外部被实例化

### 将构造方法定义为私有的

## Java语言中实现单例模式

### 使用lock

#### lock确保当一个线程位于代码的临界区时，另一个线程不进入临界区。

#### 如果其它线程试图进入锁定的代码，它将一直等待直到该对象被释放

#### 避免每次获取实例都需要进行加锁操作——双重锁定

##### 不用让线程每次都加锁，而只在实例未被创建的时候再加锁处理

##### Java语言中由于内存模型限制，双重锁定的方法可能会出问题，需要结合关键字volatile使用

### 使用静态初始化（饿汉式单例类）

#### 使用类静态成员变量，不需要开发人员显式地编写线程安全的代码，即可解决多线程环境下不安全的问题

## Python语言中实现单例模式

### 基于模块

#### 在模块文件中定义单例类（与普通类无差别），并且实例化一个该类的对象

##### class Singleton(object):
def foo(self):
	      pass

singleton = Singleton()

#### 其它文件中直接从该模块导入该对象，该对象即为全局唯一的

##### from xxx import singleton

### 基于__new__方法

### 基于metaclass

### 基于装饰器

## 参考链接

### [Python中的单例模式的几种实现方式的及优化](https://www.cnblogs.com/huchong/p/8244279.html)
